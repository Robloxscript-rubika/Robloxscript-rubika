local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

local Window = WindUI:CreateWindow({
    Title = "UI Title",
    Icon = "door-open",
    Author = "Example UI",
    Folder = "CloudHub",
    Size = UDim2.fromOffset(580, 460),
    Transparent = true,
    Theme = "Dark",
    SideBarWidth = 200,
    Background = "",
    BackgroundImageTransparency = 0.42,
    HideSearchBar = true,
    ScrollBarEnabled = false,
    User = {
        Enabled = true,
        Anonymous = true,
        Callback = function()
            print("clicked")
        end,
    },
})

local Tab = Window:Tab({
    Title = "omletttt",
    Icon = "bird",
    Locked = false,
})

local Section = Tab:Section({ 
    Title = "auto sell",
    TextXAlignment = "Left",
    TextSize = 17,
})

-- ðŸ” Ù…ØªØºÛŒØ± ÙˆØ¶Ø¹ÛŒØª Ùˆ Ù…Ù‚Ø¯Ø§Ø± Ø¢Ø³ØªØ§Ù†Ù‡ ÙØ±ÙˆØ´
local AutoSellEnabled = false
local CurrentSellThreshold = 2

-- ðŸŸ¢ ØªÙˆÚ¯Ù„ ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù†
Section:Toggle({
    Title = "Auto Sell",
    Desc = "Turn on/off auto selling when inventory is full",
    Icon = "shopping-cart",
    Type = "Checkbox",
    Default = false,
    Callback = function(state)
        AutoSellEnabled = state
    end
})

-- ðŸ“ Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ù…Ù‚Ø¯Ø§Ø± Ø­Ø¯ Ø¢Ø³ØªØ§Ù†Ù‡ ÙØ±ÙˆØ´
Section:Slider({
    Title = "Sell Threshold",
    Desc = "Minimum crop count before selling",
    Min = 1,
    Max = 260,
    Default = CurrentSellThreshold,
    Suffix = " fruits",
    Callback = function(value)
        CurrentSellThreshold = value
    end
})

-- ðŸ“¦ Ú¯Ø±ÙØªÙ† Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ Inventory
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer
local Leaderstats = LocalPlayer:WaitForChild("leaderstats")
local ShecklesCount = Leaderstats:WaitForChild("Sheckles")
local GameEvents = ReplicatedStorage:WaitForChild("GameEvents")

local IsSelling = false

local function SellInventory()
    if IsSelling then return end
    IsSelling = true

    local Character = LocalPlayer.Character
    if not Character then IsSelling = false return end
    local Previous = Character:GetPivot()

    local PreviousSheckles = ShecklesCount.Value

    Character:PivotTo(CFrame.new(62, 4, -26)) -- Ù…ÙˆÙ‚Ø¹ÛŒØª ÙØ±ÙˆØ´

    while task.wait() do
        if ShecklesCount.Value ~= PreviousSheckles then break end
        GameEvents.Sell_Inventory:FireServer()
    end

    Character:PivotTo(Previous)
    task.wait(0.2)
    IsSelling = false
end

local function GetInvCrops()
    local Backpack = LocalPlayer:WaitForChild("Backpack")
    local Character = LocalPlayer.Character
    local Crops = {}

    local function CollectCropsFromParent(Parent)
        for _, Tool in next, Parent:GetChildren() do
            if Tool:FindFirstChild("Item_String") then
                table.insert(Crops, Tool)
            end
        end
    end

    CollectCropsFromParent(Backpack)
    if Character then
        CollectCropsFromParent(Character)
    end

    return Crops
end

-- ðŸ”„ Ø­Ù„Ù‚Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø§Ø¬Ø±Ø§ÛŒ ÙØ±ÙˆØ´ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ©
task.spawn(function()
    while task.wait(2) do
        if AutoSellEnabled then
            local CropCount = #GetInvCrops()
            if CropCount >= CurrentSellThreshold then
                SellInventory()
            end
        end
    end
end)
